package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class manageservices_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n");
      out.write("\n");
      out.write("        <link href=\"css/bootstrap.css\" rel=\"stylesheet\" type=\"text/css\"/>\n");
      out.write("        <script src=\"js/jquery-1.12.4.js\" type=\"text/javascript\"></script>\n");
      out.write("        <script src=\"js/bootstrap.js\" type=\"text/javascript\"></script>\n");
      out.write("\n");
      out.write("        <title>Manage Services</title>\n");
      out.write("    </head>\n");
      out.write("\n");
      out.write("    <script>\n");
      out.write("        var jsacat;\n");
      out.write("        var jsasubcat;\n");
      out.write("        var jsaservices;\n");
      out.write("        var selectedcid;\n");
      out.write("        var selectedsid;\n");
      out.write("        var selectedcatindex;\n");
      out.write("        var selectedsubcatindex;\n");
      out.write("        var typeofservice;\n");
      out.write("\n");
      out.write("\n");
      out.write("        function readandpreview(fileobj, imageid)\n");
      out.write("        {\n");
      out.write("            var firstfile = fileobj.files[0];\n");
      out.write("\n");
      out.write("            var reader = new FileReader();\n");
      out.write("\n");
      out.write("            alert(\"File name: \" + firstfile.name);\n");
      out.write("            alert(\"File size: \" + firstfile.size);\n");
      out.write("\n");
      out.write("            reader.onload = (function (f)\n");
      out.write("            {\n");
      out.write("                return function read12(e)\n");
      out.write("                {\n");
      out.write("                    document.getElementById(imageid).src = e.target.result;\n");
      out.write("                };\n");
      out.write("            })(firstfile);\n");
      out.write("\n");
      out.write("\n");
      out.write("            reader.readAsDataURL(firstfile);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("\n");
      out.write("        function showaddservicemodel() {\n");
      out.write("\n");
      out.write("            var jscat = jsacat[selectedcatindex];\n");
      out.write("            document.getElementById(\"cid\").value = jscat[\"category_id\"];\n");
      out.write("\n");
      out.write("            document.getElementById(\"cname\").value = jscat[\"category_name\"];\n");
      out.write("            var jssubcat = jsasubcat[selectedsubcatindex];\n");
      out.write("            document.getElementById(\"sid\").value = jssubcat[\"subcategory_id\"];\n");
      out.write("\n");
      out.write("            document.getElementById(\"sname\").value = jssubcat[\"subcategory_name\"];\n");
      out.write("            $(\"#mymodaladdservice\").modal('show');\n");
      out.write("        }\n");
      out.write("        function fetchcategories() {\n");
      out.write("            var xml = new XMLHttpRequest();\n");
      out.write("            xml.onreadystatechange = function ()\n");
      out.write("            {\n");
      out.write("                if (xml.readyState == 4 && xml.status == 200)\n");
      out.write("                {\n");
      out.write("                    var ans1 = \"\";\n");
      out.write("                    var res = xml.responseText.trim();\n");
      out.write("                    var mainjson = JSON.parse(res);\n");
      out.write("                    var jsa = mainjson[\"ans\"];\n");
      out.write("\n");
      out.write("                    jsacat = jsa;\n");
      out.write("                    ans1 += \"<option>--Select Category--</option>\";\n");
      out.write("                    for (var i = 0; i < jsa.length; i++)\n");
      out.write("                    {\n");
      out.write("                        var js = jsa[i];\n");
      out.write("                        ans1 += \"<option value=\\\"\" + js[\"category_id\"] + \"\\\">\" + js[\"category_name\"] + \"</option>\";\n");
      out.write("                    }\n");
      out.write("                    document.getElementById(\"maincat\").innerHTML = ans1;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("            };\n");
      out.write("\n");
      out.write("            xml.open(\"GET\", \"./FetchDetailsOfCategories\", true);\n");
      out.write("            xml.send();\n");
      out.write("        }\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("        function setselectedcategory(value)\n");
      out.write("        {\n");
      out.write("\n");
      out.write("            var index = document.getElementById(\"maincat\").selectedIndex;\n");
      out.write("\n");
      out.write("\n");
      out.write("            if (index == 0)\n");
      out.write("            {\n");
      out.write("\n");
      out.write("                alert(\"Select any category\");\n");
      out.write("            } else\n");
      out.write("            {\n");
      out.write("                selectedcid = value;\n");
      out.write("                selectedcatindex = index - 1;\n");
      out.write("                fetchsubcategories(value);\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("        function setselectedsubcategory(value)\n");
      out.write("        {\n");
      out.write("\n");
      out.write("            var index = document.getElementById(\"subcat\").selectedIndex;\n");
      out.write("\n");
      out.write("\n");
      out.write("            if (index == 0)\n");
      out.write("            {\n");
      out.write("\n");
      out.write("                alert(\"Select any Sub-category\");\n");
      out.write("            } else\n");
      out.write("            {\n");
      out.write("                selectedsid = value;\n");
      out.write("                selectedsubcatindex = index - 1;\n");
      out.write("                fetchservicestable(value);\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("        function fetchsubcategories(category_id) {\n");
      out.write("\n");
      out.write("\n");
      out.write("            var ans1;\n");
      out.write("            var xml = new XMLHttpRequest();\n");
      out.write("            xml.onreadystatechange = function ()\n");
      out.write("            {\n");
      out.write("                if (xml.readyState == 4 && xml.status == 200)\n");
      out.write("                {\n");
      out.write("                    var res = xml.responseText.trim();\n");
      out.write("\n");
      out.write("                    var mainjson = JSON.parse(res);\n");
      out.write("                    var jsa = mainjson[\"ans\"];\n");
      out.write("                    jsasubcat = jsa;\n");
      out.write("\n");
      out.write("                    ans1 += \"<option>--Select Sub-Category--</option>\";\n");
      out.write("                    for (var i = 0; i < jsa.length; i++)\n");
      out.write("                    {\n");
      out.write("                        var js = jsa[i];\n");
      out.write("                        ans1 += \"<option value=\\\"\" + js[\"subcategory_id\"] + \"\\\">\" + js[\"subcategory_name\"] + \"</option>\";\n");
      out.write("                    }\n");
      out.write("                    document.getElementById(\"subcat\").innerHTML = ans1;\n");
      out.write("                }\n");
      out.write("            };\n");
      out.write("\n");
      out.write("            xml.open(\"GET\", \"./getSubCategories?category_id=\" + category_id, false);\n");
      out.write("            xml.send();\n");
      out.write("        }\n");
      out.write("        function fetchservicestable(subcategory_id) {\n");
      out.write("\n");
      out.write("\n");
      out.write("            var ans;\n");
      out.write("            var xml = new XMLHttpRequest();\n");
      out.write("            xml.onreadystatechange = function ()\n");
      out.write("            {\n");
      out.write("                if (xml.readyState == 4 && xml.status == 200)\n");
      out.write("                {\n");
      out.write("                    var res = xml.responseText.trim();\n");
      out.write("\n");
      out.write("                    var mainjson = JSON.parse(res);\n");
      out.write("                    var jsa = mainjson[\"ans\"];\n");
      out.write("                    jsaservices = jsa;\n");
      out.write("                    //alert(jsa[0][\"Movieid\"]);\n");
      out.write("\n");
      out.write("                    ans = \"<table  class=\\\"table table-hover\\\" >\";\n");
      out.write("                    ans += \"<thead class=\\\"bg-primary\\\"><tr><td>Service Name</td><td>Service Type</td><td>Service Description</td><td>Price Per Hour</td><td>Fixed Price</td><td>Dynamic Price</td><td>Icon</td><td>Edit</td><td>Delete</td></tr></thead>\";\n");
      out.write("\n");
      out.write("                    ans += \"<tbody>\";\n");
      out.write("\n");
      out.write("                    for (var i = 0; i < jsa.length; i++)\n");
      out.write("                    {\n");
      out.write("                        var js = jsa[i];\n");
      out.write("\n");
      out.write("                        ans += \"<tr>\";\n");
      out.write("\n");
      out.write("                        ans += \"<td id='sername_\" + i + \"'>\" + js[\"service_name\"] + \"</td>\";\n");
      out.write("                        ans += \"<td id=\\\"sertype_\" + i + \"\\\">\" + js[\"servicetype\"] + \"</td>\";\n");
      out.write("                        ans += \"<td id=\\\"serdesc_\" + i + \"\\\">\" + js[\"servicedescription\"] + \"</td>\";\n");
      out.write("                        ans += \"<td id=\\\"priceperhour_\" + i + \"\\\">\" + js[\"priceperhour\"] + \"</td>\";\n");
      out.write("                        ans += \"<td id=\\\"fixedprice_\" + i + \"\\\">\" + js[\"fixedprice\"] + \"</td>\";\n");
      out.write("                        ans += \"<td id=\\\"dynamicprice_\" + i + \"\\\">\" + js[\"dynamicprice\"] + \"</td>\";\n");
      out.write("                        ans += \"<td><img id='icon\" + i + \"' src='\" + js[\"icon\"] + \"' width='100' height='100' /></td>\";\n");
      out.write("\n");
      out.write("                        ans += \"<td><input type=\\\"button\\\" value=\\\"Edit\\\" class=\\\"btn btn-success\\\" onclick=\\\"showeditservicemodel(\" + i + \")\\\"/></td>\";\n");
      out.write("                        ans += \"<td><input type=\\\"button\\\" value=\\\"Delete\\\" class=\\\"btn btn-danger\\\" onclick=\\\"delservice(\" + i + \")\\\"/></td>\";\n");
      out.write("                        ans += \"</tr>\";\n");
      out.write("\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                    ans += \"</tbody>\";\n");
      out.write("                    ans += \"</table>\";\n");
      out.write("\n");
      out.write("                    document.getElementById(\"d1\").innerHTML = ans;\n");
      out.write("                }\n");
      out.write("            };\n");
      out.write("\n");
      out.write("            xml.open(\"GET\", \"./getServices?subcategory_id=\" + subcategory_id, false);\n");
      out.write("            xml.send();\n");
      out.write("        }\n");
      out.write("        function settype(value) {\n");
      out.write("            typeofservice = value;\n");
      out.write("\n");
      out.write("            if (typeofservice == \"Fixed Price Service\") {\n");
      out.write("                document.getElementById(\"pph\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dp\").style.display = 'none';\n");
      out.write("                document.getElementById(\"fp\").style.display = 'block';\n");
      out.write("            } else if (typeofservice == \"Price per Hour Service\") {\n");
      out.write("                document.getElementById(\"fp\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dp\").style.display = 'none';\n");
      out.write("                document.getElementById(\"pph\").style.display = 'block';\n");
      out.write("            } else if (typeofservice == \"Dynamic Price Service\") {\n");
      out.write("                document.getElementById(\"fp\").style.display = 'none';\n");
      out.write("                document.getElementById(\"pph\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dp\").style.display = 'block';\n");
      out.write("            } else {\n");
      out.write("                document.getElementById(\"pph\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dp\").style.display = 'none';\n");
      out.write("                document.getElementById(\"fp\").style.display = 'none';\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("        function settypeedit(value) {\n");
      out.write("            typeofservice = value;\n");
      out.write("            if (typeofservice == \"Fixed Price Service\") {\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'block';\n");
      out.write("            } else if (typeofservice == \"Price per Hour Service\") {\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'block';\n");
      out.write("            } else if (typeofservice == \"Dynamic Price Service\") {\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'block';\n");
      out.write("            } else {\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'none';\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("        function delservice(index)\n");
      out.write("        {\n");
      out.write("            var js = jsaservices[index];\n");
      out.write("            var serviceid = js[\"service_id\"];\n");
      out.write("            var ans = confirm(\"Are you sure you want to delete service:\");\n");
      out.write("            if (ans === true) {\n");
      out.write("\n");
      out.write("                var xmlhttp = new XMLHttpRequest();\n");
      out.write("                xmlhttp.onreadystatechange = function ()\n");
      out.write("                {\n");
      out.write("                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200)\n");
      out.write("                    {\n");
      out.write("                        var res = xmlhttp.responseText.trim();\n");
      out.write("                        if (res === \"success\") {\n");
      out.write("                            alert(\" successfully deleted\");\n");
      out.write("//                            refresh by coding\n");
      out.write("\n");
      out.write("                            setselectedsubcategory(selectedsid);\n");
      out.write("                            //end\n");
      out.write("                        } else\n");
      out.write("                            alert(\"error in deletion\");\n");
      out.write("                    }\n");
      out.write("                };\n");
      out.write("            }\n");
      out.write("            ;\n");
      out.write("            xmlhttp.open(\"GET\", \"./deleteService?service_id=\" + serviceid, true);\n");
      out.write("\n");
      out.write("            xmlhttp.send();\n");
      out.write("        }\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("        function showeditservicemodel(index) {\n");
      out.write("\n");
      out.write("            var jscat = jsacat[selectedcatindex];\n");
      out.write("            var cid = jscat[\"category_id\"];\n");
      out.write("            document.getElementById(\"cidedit\").value = cid;\n");
      out.write("            document.getElementById(\"cnameedit\").value = jscat[\"category_name\"];\n");
      out.write("            var jssubcat = jsasubcat[selectedsubcatindex];\n");
      out.write("            document.getElementById(\"snameedit\").value = jssubcat[\"subcategory_name\"];\n");
      out.write("            document.getElementById(\"sidedit\").value = jssubcat[\"subcategory_id\"];\n");
      out.write("            var jsservice = jsaservices[index];\n");
      out.write("            document.getElementById(\"sernameedit\").value = jsservice[\"service_name\"];\n");
      out.write("            document.getElementById(\"serviceidedit\").value = jsservice[\"service_id\"];\n");
      out.write("            document.getElementById(\"serdescedit\").value = jsservice[\"servicedescription\"];\n");
      out.write("            document.getElementById(\"sertypeedit\").value = jsservice[\"servicetype\"];\n");
      out.write("            document.getElementById(\"icon2\").value=\"\";\n");
      out.write("            document.getElementById(\"im3\").src=jsservice[\"icon\"];\n");
      out.write("\n");
      out.write("            if (jsservice[\"servicetype\"] == \"Fixed Price Service\") {\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'block';\n");
      out.write("                document.getElementById(\"fixedpriceedit\").value = jsservice[\"fixedprice\"];\n");
      out.write("            } else if (jsservice[\"servicetype\"] == \"Price per Hour Service\") {\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'block';\n");
      out.write("                document.getElementById(\"priceperhouredit\").value = jsservice[\"priceperhour\"];\n");
      out.write("            } else if (jsservice[\"servicetype\"] == \"Dynamic Price Service\") {\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'block';\n");
      out.write("                document.getElementById(\"dynamicpriceedit\").value = jsservice[\"dynamicprice\"];\n");
      out.write("            } else {\n");
      out.write("                document.getElementById(\"pphedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"dpedit\").style.display = 'none';\n");
      out.write("                document.getElementById(\"fpedit\").style.display = 'none';\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            $(\"#mymodaleditservice\").modal('show');\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        function addservice()\n");
      out.write("        {\n");
      out.write("\n");
      out.write("            var sername = document.getElementById(\"sname\").value;\n");
      out.write("            var serdesc = document.getElementById(\"serdesc\").value;\n");
      out.write("            var sertypeindex = document.getElementById(\"sertype\").selectedIndex;\n");
      out.write("            var sertypevalue = document.getElementById(\"sertype\").selectedIndex;\n");
      out.write("\n");
      out.write("\n");
      out.write("            if (sername == \"\")\n");
      out.write("            {\n");
      out.write("                alert(\"Please Enter Service Name\");\n");
      out.write("            } else if (sertypeindex == 0)\n");
      out.write("            {\n");
      out.write("                alert(\"Please Select Service Type\");\n");
      out.write("            } else if (sertypevalue == \"Fixed Price Service\")\n");
      out.write("            {\n");
      out.write("                var fp = document.getElementById(\"fixedprice\").value;\n");
      out.write("                if (fp == \"\") {\n");
      out.write("                    alert(\"enter fixed price value\");\n");
      out.write("                }\n");
      out.write("            } else if (sertypevalue == \"Price per Hour Service\")\n");
      out.write("            {\n");
      out.write("                var pph = document.getElementById(\"priceperhour\").value;\n");
      out.write("                if (pph == \"\") {\n");
      out.write("                    alert(\"enter  price per hour value\");\n");
      out.write("                }\n");
      out.write("            } else if (sertypevalue == \"Dynamic Price Service\")\n");
      out.write("            {\n");
      out.write("                var dp = document.getElementById(\"dynamicprice\").value;\n");
      out.write("                if (dp == \"\") {\n");
      out.write("                    alert(\"enter dynamic price value\");\n");
      out.write("                }\n");
      out.write("            } else if (serdesc == \"\")\n");
      out.write("            {\n");
      out.write("                alert(\"Please Enter Service Description\");\n");
      out.write("            } else {\n");
      out.write("\n");
      out.write("                var formdata = new FormData();\n");
      out.write("\n");
      out.write("                var controls = document.getElementById(\"form1\").elements;\n");
      out.write("\n");
      out.write("                alert(\"found \" + controls.length + \" controls in form\");\n");
      out.write("\n");
      out.write("                var ans = \"\";\n");
      out.write("                //NEW CODE\n");
      out.write("\n");
      out.write("                var flag = 0;\n");
      out.write("                for (var i = 0; i < controls.length; i++)\n");
      out.write("                {\n");
      out.write("                    if (controls[i].name == \"\" || controls[i].name == null)\n");
      out.write("                    {\n");
      out.write("                        flag = 1;\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                    if (controls[i].type == \"file\")\n");
      out.write("                    {\n");
      out.write("                        if (controls[i].files.length != 0)\n");
      out.write("                        {\n");
      out.write("                            ans = ans + controls[i].name + \": \" + controls[i].files[0].name + \"\\n\";\n");
      out.write("                            formdata.append(controls[i].name, controls[i].files[0]);\n");
      out.write("                        } \n");
      out.write("                        else\n");
      out.write("                        {\n");
      out.write("                            flag = 2;\n");
      out.write("                        }\n");
      out.write("                    } else\n");
      out.write("                    {\n");
      out.write("                        ans = ans + controls[i].name + \": \" + controls[i].value + \"\\n\";\n");
      out.write("                        formdata.append(controls[i].name, controls[i].value);\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                }\n");
      out.write("                if (flag == 1)\n");
      out.write("                {\n");
      out.write("                    alert(\"CHECK: --> Give name attribute to all controls in form\");\n");
      out.write("                } else if (flag == 2)\n");
      out.write("                {\n");
      out.write("                    alert(\"CHECK: --> Select Files for file controls\");\n");
      out.write("                } else\n");
      out.write("                {\n");
      out.write("                    alert(ans);\n");
      out.write("\n");
      out.write("                    var xhr = new XMLHttpRequest;\n");
      out.write("\n");
      out.write("\n");
      out.write("                    xhr.open(\"POST\", \"./AdminAddService\", true);\n");
      out.write("\n");
      out.write("                    //for response receiving\n");
      out.write("                    xhr.onreadystatechange = function ()\n");
      out.write("                    {\n");
      out.write("                        if (xhr.readyState === 4 && xhr.status === 200)\n");
      out.write("                        {\n");
      out.write("                            var res = xhr.responseText.trim();\n");
      out.write("                            if (res === \"success\")\n");
      out.write("                            {\n");
      out.write("                                alert(\"Service Added Successfully\");\n");
      out.write("                                $(\"#mymodaladdservice\").modal('hide');\n");
      out.write("                                document.getElementById(\"dynamicprice\").value = \"\";\n");
      out.write("                                document.getElementById(\"priceperhour\").value = \"\";\n");
      out.write("                                document.getElementById(\"fixedprice\").value = \"\";\n");
      out.write("                                document.getElementById(\"sertype\").selectedIndex = 0;\n");
      out.write("                                document.getElementById(\"serdesc\").value = \"\";\n");
      out.write("                                document.getElementById(\"sername\").value = \"\";\n");
      out.write("                                settype(\"--select service--\");\n");
      out.write("\n");
      out.write("                                setselectedsubcategory(selectedsid);\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                            } else\n");
      out.write("                            {\n");
      out.write("                                alert(\"This Service Already Exist under this Sub-Category\");\n");
      out.write("                            }\n");
      out.write("\n");
      out.write("                        }\n");
      out.write("                    };\n");
      out.write("\n");
      out.write("\n");
      out.write("                    xhr.send(formdata);\n");
      out.write("\n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("        function editservice()\n");
      out.write("        {\n");
      out.write("\n");
      out.write("            var sername = document.getElementById(\"sernameedit\").value;\n");
      out.write("            var serdesc = document.getElementById(\"serdescedit\").value;\n");
      out.write("            var sertypeindex = document.getElementById(\"sertypeedit\").selectedIndex;\n");
      out.write("            var sertypevalue = document.getElementById(\"sertypeedit\").selectedIndex;\n");
      out.write("\n");
      out.write("\n");
      out.write("            if (sername == \"\")\n");
      out.write("            {\n");
      out.write("                alert(\"Please Enter Service Name\");\n");
      out.write("            } else if (sertypeindex == 0)\n");
      out.write("            {\n");
      out.write("                alert(\"Please Select Service Type\");\n");
      out.write("            } else if (sertypevalue == \"Fixed Price Service\")\n");
      out.write("            {\n");
      out.write("                var fp = document.getElementById(\"fixedpriceedit\").value;\n");
      out.write("                if (fp == \"\") {\n");
      out.write("                    alert(\"enter fixed price value\");\n");
      out.write("                }\n");
      out.write("            } else if (sertypevalue == \"Price per Hour Service\")\n");
      out.write("            {\n");
      out.write("                var pph = document.getElementById(\"priceperhouredit\").value;\n");
      out.write("                if (pph == \"\") {\n");
      out.write("                    alert(\"enter  price per hour value\");\n");
      out.write("                }\n");
      out.write("            } else if (sertypevalue == \"Dynamic Price Service\")\n");
      out.write("            {\n");
      out.write("                var dp = document.getElementById(\"dynamicpriceedit\").value;\n");
      out.write("                if (dp == \"\") {\n");
      out.write("                    alert(\"enter dynamic price value\");\n");
      out.write("                }\n");
      out.write("            } else if (serdesc == \"\")\n");
      out.write("            {\n");
      out.write("                alert(\"Please Enter Service Description\");\n");
      out.write("            } else {\n");
      out.write("                alert(\"ok\");\n");
      out.write("                var formdata = new FormData();\n");
      out.write("\n");
      out.write("                var controls = document.getElementById(\"form2\").elements;\n");
      out.write("\n");
      out.write("                alert(\"found \" + controls.length + \" controls in form\");\n");
      out.write("\n");
      out.write("                var ans = \"\";\n");
      out.write("                //NEW CODE\n");
      out.write("\n");
      out.write("                var flag = 0;\n");
      out.write("                for (var i = 0; i < controls.length; i++)\n");
      out.write("                {\n");
      out.write("                    if (controls[i].name == \"\" || controls[i].name == null)\n");
      out.write("                    {\n");
      out.write("                        flag = 1;\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                    if (controls[i].type == \"file\")\n");
      out.write("                    {\n");
      out.write("                        if (controls[i].files.length != 0)\n");
      out.write("                        {\n");
      out.write("                            ans = ans + controls[i].name + \": \" + controls[i].files[0].name + \"\\n\";\n");
      out.write("                            formdata.append(controls[i].name, controls[i].files[0]);\n");
      out.write("                        }\n");
      out.write("                        //else\n");
      out.write("                        //{\n");
      out.write("                          //  flag = 2;\n");
      out.write("                        //}\n");
      out.write("                    } else\n");
      out.write("                    {\n");
      out.write("                        ans = ans + controls[i].name + \": \" + controls[i].value + \"\\n\";\n");
      out.write("                        formdata.append(controls[i].name, controls[i].value);\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                }\n");
      out.write("                if (flag == 1)\n");
      out.write("                {\n");
      out.write("                    alert(\"CHECK: --> Give name attribute to all controls in form\");\n");
      out.write("                } else if (flag == 2)\n");
      out.write("                {\n");
      out.write("                    alert(\"CHECK: --> Select Files for file controls\");\n");
      out.write("                } else\n");
      out.write("                {\n");
      out.write("                    alert(ans);\n");
      out.write("\n");
      out.write("                    var xhr = new XMLHttpRequest;\n");
      out.write("\n");
      out.write("\n");
      out.write("                    xhr.open(\"POST\", \"./EditService\", true);\n");
      out.write("\n");
      out.write("                    //for response receiving\n");
      out.write("                    xhr.onreadystatechange = function ()\n");
      out.write("                    {\n");
      out.write("                        if (xhr.readyState === 4 && xhr.status === 200)\n");
      out.write("                        {\n");
      out.write("                            var res = xhr.responseText.trim();\n");
      out.write("                            if (res === \"success\")\n");
      out.write("                            {\n");
      out.write("                                alert(\"Service Updated Successfully\");\n");
      out.write("                                $(\"#mymodaleditservice\").modal('hide');\n");
      out.write("                                document.getElementById(\"dynamicpriceedit\").value = \"\";\n");
      out.write("                                document.getElementById(\"priceperhouredit\").value = \"\";\n");
      out.write("                                document.getElementById(\"fixedpriceedit\").value = \"\";\n");
      out.write("                                document.getElementById(\"sertypeedit\").selectedIndex = 0;\n");
      out.write("                                document.getElementById(\"serdescedit\").value = \"\";\n");
      out.write("                                document.getElementById(\"sernameedit\").value = \"\";\n");
      out.write("                                document.getElementById(\"icon2\").value=\"\";\n");
      out.write("            document.getElementById(\"im3\").src=\"\";\n");
      out.write("\n");
      out.write("                                settypeedit(\"--select service--\");\n");
      out.write("                                setselectedsubcategory(selectedsid);\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                            } else\n");
      out.write("                            {\n");
      out.write("                                alert(\"Service Update Failed\");\n");
      out.write("                            }\n");
      out.write("\n");
      out.write("                        }\n");
      out.write("                    };\n");
      out.write("\n");
      out.write("\n");
      out.write("                    xhr.send(formdata);\n");
      out.write("\n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("\n");
      out.write("    </script>\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("    <body onload=\"fetchcategories()\">\n");
      out.write("        \n");
      out.write("         ");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "AdminLogoutNavbar.jsp", out, false);
      out.write("\n");
      out.write("         <br>\n");
      out.write("         <br>\n");
      out.write("         <br>\n");
      out.write("         \n");
      out.write("        <div class=\"container\" style=\"margin-top:80px\">\n");
      out.write("            <div class=\"row\">\n");
      out.write("                <div class=\"col-sm-8 col-sm-offset-2\">\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                    <div class=\"form-group\">\n");
      out.write("                        <label>Select Category</label><select class=\"form-control\" id=\"maincat\" name=\"maincat\" onchange=\"setselectedcategory(this.value)\">\n");
      out.write("\n");
      out.write("\n");
      out.write("                        </select>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"form-group\">\n");
      out.write("                        <label>Select Sub-Category</label><select class=\"form-control\" id=\"subcat\" name=\"subcat\" onchange=\"setselectedsubcategory(this.value)\">\n");
      out.write("\n");
      out.write("\n");
      out.write("                        </select>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"page-header\">\n");
      out.write("                        <center> <input type=\"button\" value=\"Add Service\" class=\"btn btn-success \" style=\"margin-right: 200px;\" onclick=\"showaddservicemodel()\" /> </center>\n");
      out.write("\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("                <div id=\"d1\">\n");
      out.write("\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("            <!-- Modal add new category-->\n");
      out.write("            <div id=\"mymodaladdservice\" class=\"modal fade\" role=\"dialog\" style=\"background-color: #cccccc;\">\n");
      out.write("                <div class=\"modal-dialog\">\n");
      out.write("\n");
      out.write("                    <!-- Modal content-->\n");
      out.write("                    <div class=\"modal-content\" style=\"background-color: #999999;\" >\n");
      out.write("                        <div class=\"modal-header\">\n");
      out.write("                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n");
      out.write("                            <h4 class=\"modal-title\">Add Service</h4>\n");
      out.write("                        </div>\n");
      out.write("                        <div class=\"modal-body\">\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                            <form id=\"form1\" action=\"#\" enctype=\"multipart/form-data\">\n");
      out.write("\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label>under category</label>\n");
      out.write("                                    <input type=\"text\" id=\"cname\" name=\"cname\" class=\"form-control\" placeholder=\"Category name\"  readonly>\n");
      out.write("                                    <input type=\"hidden\" id=\"cid\" name=\"cid\" >\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label>under sub-category</label>\n");
      out.write("                                    <input type=\"text\" id=\"sname\" name=\"sname\" class=\"form-control\" placeholder=\"Sub-Category name\"  readonly>\n");
      out.write("                                    <input type=\"hidden\" id=\"sid\" name=\"sid\" >\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-control\">\n");
      out.write("                                    <label>Select Service type</label>\n");
      out.write("                                    <select  id=\"sertype\" name=\"sertype\" onchange=\"settype(this.value)\" >\n");
      out.write("                                        <option value=\"--select service type--\">--select service type--</option>\n");
      out.write("                                        <option value=\"Fixed Price Service\">Fixed Price Service</option>\n");
      out.write("                                        <option value=\"Price per Hour Service\">Price per Hour Service</option>\n");
      out.write("                                        <option value=\"Dynamic Price Service\">Dynamic Price Service</option>\n");
      out.write("                                    </select>\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label> Service Name</label>\n");
      out.write("                                    <input type=\"text\" id=\"sername\" name=\"sername\" class=\"form-control\" placeholder=\"Service name\">\n");
      out.write("                                </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label> Service Description</label>\n");
      out.write("                                    <textarea  rows=\"10\" cols=\"5\" id=\"serdesc\" name=\"serdesc\" class=\"form-control\" placeholder=\"Service Description\"></textarea>\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\" id=\"pph\">\n");
      out.write("                                    <label> Price Per Hour</label>\n");
      out.write("                                    <input type=\"text\" id=\"priceperhour\" name=\"priceperhour\" class=\"form-control\" placeholder=\"enter price per hour\">\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\" id=\"fp\">\n");
      out.write("                                    <label> Fixed Price</label>\n");
      out.write("                                    <input type=\"text\" id=\"fixedprice\" name=\"fixedprice\" class=\"form-control\" placeholder=\"enter fixed price\">\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\" id=\"dp\">\n");
      out.write("                                    <label> Dynamic Price</label>\n");
      out.write("                                    <input type=\"text\" id=\"dynamicprice\" name=\"dynamicprice\" class=\"form-control\" placeholder=\"enter dynamic price\">\n");
      out.write("                                </div>\n");
      out.write("\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label>Select Icon</label>\n");
      out.write("                                    <input type=\"file\"  class=\"form-control\" name=\"icon \"  onchange=\"readandpreview(this, 'im2')\"/>\n");
      out.write("\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("\n");
      out.write("                                    <label>preview</label>\n");
      out.write("                                    <img src=\"\" id=\"im2\" style=\"height:100px;width:100px\"/>\n");
      out.write("                                </div>\n");
      out.write("\n");
      out.write("                                <input type=\"button\" name=\"bt\" value=\"Add Service\" class=\"btn btn-default \" style=\"margin-left: 195px;\" onclick=\"addservice()\" />\n");
      out.write("                            </form>\n");
      out.write("                        </div>\n");
      out.write("                        <div class=\"modal-footer\">\n");
      out.write("                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("            <!-- Modal add edit category-->\n");
      out.write("            <div id=\"mymodaleditservice\" class=\"modal fade\" role=\"dialog\" style=\"background-color: #cccccc;\">\n");
      out.write("                <div class=\"modal-dialog\">\n");
      out.write("\n");
      out.write("                    <!-- Modal content-->\n");
      out.write("                    <div class=\"modal-content\" style=\"background-color: #999999;\" >\n");
      out.write("                        <div class=\"modal-header\">\n");
      out.write("                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n");
      out.write("                            <h4 class=\"modal-title\">Edit Service</h4>\n");
      out.write("                        </div>\n");
      out.write("                        <div class=\"modal-body\">\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                            <form id=\"form2\" action=\"#\" enctype=\"multipart/form-data\">\n");
      out.write("\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label>under category</label>\n");
      out.write("                                    <input type=\"text\" id=\"cnameedit\" name=\"cnameedit\" class=\"form-control\" placeholder=\"Category name\"  readonly>\n");
      out.write("                                    <input type=\"hidden\" id=\"cidedit\" name=\"cidedit\" >\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label>under sub-category</label>\n");
      out.write("                                    <input type=\"text\" id=\"snameedit\" name=\"snameedit\" class=\"form-control\" placeholder=\"Sub-Category name\"  readonly>\n");
      out.write("                                    <input type=\"hidden\" id=\"sidedit\" name=\"sidedit\" >\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-control\">\n");
      out.write("                                    <label>Select Service type</label>\n");
      out.write("                                    <select  id=\"sertypeedit\" name=\"sertypeedit\" onchange=\"settypeedit(this.value)\" >\n");
      out.write("                                        <option value=\"--select service type--\">--select service type--</option>\n");
      out.write("                                        <option value=\"Fixed Price Service\">Fixed Price Service</option>\n");
      out.write("                                        <option value=\"Price per Hour Service\">Price per Hour Service</option>\n");
      out.write("                                        <option value=\"Dynamic Price Service\">Dynamic Price Service</option>\n");
      out.write("                                    </select>\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label> Service Name</label>\n");
      out.write("                                    <input type=\"text\" id=\"sernameedit\" name=\"sernameedit\" class=\"form-control\" placeholder=\"Service name\">\n");
      out.write("                                    <input type=\"hidden\" id=\"serviceidedit\" name=\"serviceidedit\" >\n");
      out.write("                                </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label> Service Description</label>\n");
      out.write("                                    <textarea  rows=\"10\" cols=\"5\" id=\"serdescedit\" name=\"serdescedit\" class=\"form-control\" placeholder=\"Service Description\"></textarea>\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\" id=\"pphedit\">\n");
      out.write("                                    <label> Price Per Hour</label>\n");
      out.write("                                    <input type=\"text\" id=\"priceperhouredit\" name=\"priceperhouredit\" class=\"form-control\" placeholder=\"enter price per hour\">\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\" id=\"fpedit\">\n");
      out.write("                                    <label> Fixed Price</label>\n");
      out.write("                                    <input type=\"text\" id=\"fixedpriceedit\" name=\"fixedpriceedit\" class=\"form-control\" placeholder=\"enter fixed price\">\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\" id=\"dpedit\">\n");
      out.write("                                    <label> Dynamic Price</label>\n");
      out.write("                                    <input type=\"text\" id=\"dynamicpriceedit\" name=\"dynamicpriceedit\" class=\"form-control\" placeholder=\"enter dynamic price\">\n");
      out.write("                                </div>\n");
      out.write("\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("                                    <label>Select Icon</label>\n");
      out.write("                                    <input type=\"file\" id=\"icon2\" class=\"form-control\" name=\"icon2 \"  onchange=\"readandpreview(this, 'im3')\"/>\n");
      out.write("\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"form-group\">\n");
      out.write("\n");
      out.write("                                    <label>preview</label>\n");
      out.write("                                    <img src=\"\" id=\"im3\" style=\"height:100px;width:100px\"/>\n");
      out.write("                                </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("                                <input type=\"button\" name=\"btedit\" value=\"Update Service\" class=\"btn btn-default \" style=\"margin-left: 195px;\" onclick=\"editservice()\" />\n");
      out.write("                            </form>\n");
      out.write("                        </div>\n");
      out.write("                        <div class=\"modal-footer\">\n");
      out.write("                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("    </body>\n");
      out.write("</html>\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
